[home]
enabled = true
title = "Dev Stack"
titleFont = "pallet"
titleAlign = "center"

[ui]
sidebarPosition = "left"
horizontalTabPosition = "top"
maxLogLines = 100000

[mcp]
enabled = true
port = 18765

# === Dependency Chain Demo ===
# Demonstrates dependsOn: database -> api -> worker
[[tools]]
name = "database"
command = "bun"
args = ["test-scripts/slow-start-server.js"]
cwd = "."
description = "Simulated database (takes 10s to become healthy)"
[tools.healthCheck]
url = "http://localhost:7772/health"
interval = 2000
retries = 10
[tools.ui]
label = "Database"
url = "http://localhost:7772"

[[tools]]
name = "api"
command = "bun"
args = ["test-scripts/healthy-server.js"]
cwd = "."
dependsOn = ["database"]
description = "API server (waits for database)"
[tools.healthCheck]
url = "http://localhost:7771/health"
interval = 2000
[tools.ui]
label = "API"
url = "http://localhost:7771"

[[tools]]
name = "worker"
command = "bun"
args = ["test-scripts/startup-delay.js"]
cwd = "."
dependsOn = ["api"]
description = "Background worker (waits for API)"

# === Health Check Test Servers ===
[[tools]]
name = "flaky-server"
command = "bun"
args = ["test-scripts/flaky-server.js"]
cwd = "."
cleanup = []
description = "Alternates between healthy and unhealthy every 15s"
[tools.healthCheck]
url = "http://localhost:7773/health"
interval = 5000
retries = 2
[tools.ui]
label = "Flaky App"
url = "http://localhost:7773"

# === Baseline ===
[[tools]]
name = "steady-heartbeat"
command = "bun"
args = ["test-scripts/steady-heartbeat.js"]
cwd = "."
cleanup = []

# === Performance / Volume ===
[[tools]]
name = "rapid-burst"
command = "bun"
args = ["test-scripts/rapid-burst.js"]
cwd = "."
cleanup = []

[[tools]]
name = "volume-5k"
command = "bun"
args = ["test-scripts/volume-5k.js"]
cwd = "."
cleanup = []

[[tools]]
name = "volume-20k"
command = "bun"
args = ["test-scripts/volume-20k.js"]
cwd = "."
cleanup = []

[[tools]]
name = "volume-110k"
command = "bun"
args = ["test-scripts/volume-110k.js"]
cwd = "."
cleanup = []

# === Display / Rendering ===
[[tools]]
name = "long-lines"
command = "bun"
args = ["test-scripts/long-lines.js"]
cwd = "."
cleanup = []

[[tools]]
name = "unicode-emoji"
command = "bun"
args = ["test-scripts/unicode-emoji.js"]
cwd = "."
cleanup = []

[[tools]]
name = "ansi-rainbow"
command = "bun"
args = ["test-scripts/ansi-rainbow.js"]
cwd = "."
cleanup = []

[[tools]]
name = "progress-spinner"
command = "bun"
args = ["test-scripts/progress-spinner.js"]
cwd = "."
cleanup = []

[[tools]]
name = "json-logs"
command = "bun"
args = ["test-scripts/json-logs.js"]
cwd = "."
cleanup = []

[[tools]]
name = "stack-traces"
command = "bun"
args = ["test-scripts/stack-traces.js"]
cwd = "."
cleanup = []

[[tools]]
name = "blank-lines"
command = "bun"
args = ["test-scripts/blank-lines.js"]
cwd = "."
cleanup = []

[[tools]]
name = "tab-whitespace"
command = "bun"
args = ["test-scripts/tab-whitespace.js"]
cwd = "."
cleanup = []

# === Process Lifecycle ===
[[tools]]
name = "instant-success"
command = "bun"
args = ["test-scripts/instant-success.js"]
cwd = "."
cleanup = []

[[tools]]
name = "instant-crash"
command = "bun"
args = ["test-scripts/instant-crash.js"]
cwd = "."
cleanup = []

[[tools]]
name = "delayed-crash"
command = "bun"
args = ["test-scripts/delayed-crash.js"]
cwd = "."
cleanup = []

[[tools]]
name = "slow-shutdown"
command = "bun"
args = ["test-scripts/slow-shutdown.js"]
cwd = "."
cleanup = []

[[tools]]
name = "ignore-sigterm"
command = "bun"
args = ["test-scripts/ignore-sigterm.js"]
cwd = "."
cleanup = []

[[tools]]
name = "startup-delay"
command = "bun"
args = ["test-scripts/startup-delay.js"]
cwd = "."
cleanup = []

[[tools]]
name = "silent-runner"
command = "bun"
args = ["test-scripts/silent-runner.js"]
cwd = "."
cleanup = []

# === Output Streams ===
[[tools]]
name = "stderr-only"
command = "bun"
args = ["test-scripts/stderr-only.js"]
cwd = "."
cleanup = []

[[tools]]
name = "interleaved-streams"
command = "bun"
args = ["test-scripts/interleaved-streams.js"]
cwd = "."
cleanup = []

# === Search / Filter Testing ===
[[tools]]
name = "searchable-patterns"
command = "bun"
args = ["test-scripts/searchable-patterns.js"]
cwd = "."
cleanup = []
